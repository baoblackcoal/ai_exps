## **AI Agent引导CircuitJS半加器仿真实验需求文档**

文档版本: 1.1  
日期: 2025年5月30日

### **1\. 项目概述与目标**

#### **1.1 项目背景**

随着在线教育和虚拟实验的普及，AI Agent作为智能辅导工具，能够在学生进行电路仿真等实践操作时提供个性化、即时的指导。本项目旨在开发一个具备推理、规划、执行、工具使用及自我纠错能力的AI Agent，专门引导学生使用CircuitJS（一个在线电子电路模拟器）完成半加器数字电路的仿真实验。

#### **1.2 项目目标**

* **提升学习效率与体验：** 通过AI Agent的实时引导，帮助学生克服实验中可能遇到的困难，顺利完成半加器仿真。  
* **深化理论知识理解：** 结合仿真操作，使学生更直观地理解半加器的工作原理、逻辑表达式及真值表。  
* **培养实践操作技能：** 引导学生熟悉CircuitJS的基本操作，掌握数字电路仿真的基本方法。  
* **实现个性化辅导：** AI Agent能够根据学生的进度和遇到的问题，提供差异化的指导和反馈，并能根据学生的实验行为主动给出建议。

### **2\. 用户与场景**

#### **2.1 目标用户**

* 学习数字电子技术或相关课程的初学者。  
* 对电路仿真软件操作不熟悉的学生。  
* 需要个性化学习辅导的学生。

#### **2.2 使用场景**

学生在计算机上打开集成了AI Agent和CircuitJS仿真环境的网页。学生根据AI Agent的指引，在CircuitJS中搭建和测试半加器电路，同时参考AI Agent提供的实验步骤、原理图和实时数据。

### **3\. AI Agent核心能力需求**

AI Agent需具备以下核心AI能力，并在与学生的交互及实验引导中体现：

#### **3.1 推理能力 (Reasoning)**

* **理解学生意图：** 能理解学生通过自然语言提出的问题或描述的困惑（例如：“为什么我的输出S一直是0？”“异或门在哪里找？”）。  
* **电路逻辑分析：** 能根据半加器的标准逻辑（S \= A ⊕ B, C\_out \= A ⋅ B）和学生当前的电路状态（如果可以获取或学生描述），推断潜在的连接错误或逻辑错误。  
* **故障诊断：** 基于学生的描述或仿真结果（包括实时真值表数据），推理出电路可能存在的问题点。  
* **知识关联：** 将学生的提问与半加器的理论知识（如真值表、逻辑门特性）相关联进行解释。

#### **3.2 规划能力 (Planning)**

* **实验步骤规划：** 能够将半加器仿真实验分解为一系列有序、可执行的步骤（例如：介绍半加器 \-\> 查找元器件 \-\> 搭建电路 \-\> 设置输入 \-\> 观察输出 \-\> 验证结果 \-\> 思考与总结），并在界面清晰展示。  
* **动态调整计划：** 根据学生的学习进度、反馈和遇到的困难，动态调整指导计划。例如，如果学生在某个步骤卡住，Agent应能提供更详细的子步骤或不同的解释。  
* **目标导向：** 始终以帮助学生成功搭建并理解半加器为最终目标来规划交互。

#### **3.3 执行能力 (Execution)**

* **指令下达：** 清晰、准确地向学生发出操作指令（例如：“请从左侧工具栏‘逻辑门’中拖出一个‘异或门’到工作区。”）。  
* **信息呈现：** 能够以文本、图片链接（如果可能）或引导学生查看CircuitJS特定区域的方式呈现信息。界面会同步展示实验步骤、原理图、实时真值表和当前步骤需记录的结果提示。  
* **进度跟踪：** 记录并高亮显示学生当前所处的实验步骤。  
* **反馈提供：** 对学生的提问和操作（基于学生的描述或可能的行为数据）给予及时、有效的反馈。  
* **主动建议：** 能够根据当前实验步骤和学生的实时操作行为（例如，在CircuitJS中的操作），主动给出引导性或提示性的文字建议。

#### **3.4 工具使用能力 (Tool Use \- Guiding CircuitJS & Interface)**

* **CircuitJS界面认知：** 拥有关于CircuitJS界面布局、常用元器件（如输入源、输出探针、逻辑门AND/XOR/NOT、导线等）及其操作方法的知识库。  
* **操作指导：** 能够指导学生如何在CircuitJS中进行查找、选择、放置、连接、修改和删除等操作。  
* **仿真参数解释：** （若涉及）能解释CircuitJS中可能与仿真相关的基本参数设置。  
* **数据接口能力：** 具备通过接口（如CircuitJS API，若可用）读取仿真环境中的实时数据（如逻辑门的输入输出状态，形成实时真值表）的能力，或引导学生观察并报告这些数据以更新界面显示。

#### **3.5 自我纠错与适应能力 (Self-Correction/Adaptation)**

* **识别无效指导：** 如果发现学生根据其指导操作后仍未解决问题，或学生明确表示不理解，Agent应能识别其指导可能存在歧义或不够清晰。  
* **调整解释策略：** 当学生无法理解时，尝试用不同的方式解释同一概念或操作步骤（例如，从文字描述变为更细致的步骤拆解，或提示学生注意某个细节）。  
* **错误预判与提示：** 基于常见的学生错误（如悬空输入、错误连接逻辑门等），在关键步骤前进行预判性提示。  
* **从交互中学习（高级）：** （可选的长期目标）记录与学生的交互数据，分析常见问题和有效的指导方式，逐步优化自身的知识库和指导策略。

### **4\. 功能需求详述**

AI Agent应具备以下具体功能模块和交互流程：

#### **4.1 实验准备阶段**

* **问候与介绍：** 主动问候学生，简要介绍本次实验的目的（搭建半加器）和所用工具（CircuitJS）。界面同步显示实验总览步骤。  
* **理论回顾（可选）：** 简要回顾半加器的概念、功能、输入输出（A, B, Sum, Carry\_out）以及真值表。界面可展示半加器标准原理图和真值表。  
  * *推理应用：* 根据学生回答判断其对基础知识的掌握程度。  
* **CircuitJS环境检查提示：** 提示学生确认已打开并熟悉CircuitJS操作区。

#### **4.2 电路搭建指导阶段**

* **元器件指导：**  
  * 按需指导学生找到搭建半加器所需的元器件。界面高亮当前步骤，例如“添加输入元件”。  
  * *工具使用应用：* 清晰描述元器件在CircuitJS工具栏中的位置或名称。  
* **连接指导：**  
  * 分步指导学生如何连接元器件。界面高亮当前连接步骤，例如“连接输入A到XOR门”。  
  * 界面应清晰展示当前搭建电路的原理图参考（可以是静态图片或动态生成的示意图）。  
  * *规划应用：* 将复杂的连接任务分解为小步骤。  
  * *执行应用：* 给出明确的连接指令。  
* **实时问答与纠错：**  
  * 学生在搭建过程中可以随时提问。  
  * AI应提示学生在关键步骤（如完成一个逻辑门的连接）后，在实验助手面板的“本步实验结果记录”区域记录观察结果或进行自我检查（例如：“输入A已连接到XOR门和AND门”）。  
  * *推理应用：* 分析学生的问题，结合电路逻辑进行解答。  
  * *自我纠错应用：* 如果学生反馈连接错误或不理解，Agent应尝试提供更详细的指导或替代方案。  
* **主动建议示例：** 若AI通过行为分析（假设有此能力）或学生长时间停留，可以提示：“看起来你正在寻找与门，它通常在‘逻辑门’类别下。需要帮助吗？”或“连接导线时，请确保点击到元器件的连接点上，连接点通常会高亮显示。”

#### **4.3 仿真与验证阶段**

* **输入设置指导：** 指导学生如何改变输入A和B的状态（0或1）。界面高亮当前步骤“验证真值表”。  
* **观察输出指导：** 提示学生观察对应输入下，输出S和C\_out的状态，这些状态会实时显示在“实验助手面板”的“实时真值表”区域。  
* **真值表验证：**  
  * 引导学生按照半加器的真值表（00, 01, 10, 11）逐一设置输入。  
  * AI应明确指示学生在每个输入组合验证后，需要在“本步实验结果记录”区域记录哪些实验结果（例如：“输入A=0, B=1时，记录S=1, C\_out=0”）。  
  * *推理应用：* 帮助学生将仿真结果（来自实时真值表区域）与理论真值表进行对比，判断电路是否按预期工作。  
* **故障排查：**  
  * 如果实时真值表显示的仿真结果与理论真值表不符，引导学生进行排查。  
  * *推理应用：* 提出可能的原因，如：“实时真值表显示当A=1,B=1时，C\_out为0，这与预期不符。请对照原理图检查与门的输入和输出连接是否正确？”  
  * *自我纠错应用：* 如果之前的指导可能导致了混淆，Agent应澄清。  
* **主动建议示例：** “我注意到你多次点击输入A但状态没有改变，请确保你点击的是逻辑输入开关本身。或者，你可以告诉我你期望的A和B的值，我来引导你检查。”

#### **4.4 总结与拓展阶段**

* **结果确认：** 确认学生是否成功得到正确的仿真结果，并完成了所有步骤的记录。  
* **知识点总结：** 简要总结半加器的核心功能和应用。  
* **提问与思考：** 提出一些引导性问题。  
  * *规划应用：* 为学有余力的学生提供拓展学习方向。  
* **实验结束：** 感谢学生的使用，鼓励继续探索。

### **5\. 非功能性需求**

* **响应速度：** Agent对学生输入的响应应在几秒钟内完成。  
* **准确性：** 提供的电路知识、操作指令、原理图必须准确无误。实时真值表数据需准确反映仿真状态。  
* **易用性：** Agent的语言应简洁明了，易于初学者理解。界面布局清晰，信息易于查找。  
* **健壮性：** 能处理学生一些不规范的输入或提问，给出合理的反馈或引导。  
* **友好性：** 交互语气应友好、耐心、鼓励。

### **6\. 交互界面初步设想 (若适用)**

* **主要形式：** 三栏式布局，左侧为AI Agent聊天窗口，中间为CircuitJS嵌入区域，右侧为实验助手面板。  
* **辅助元素（可选）：**  
  * Agent消息中可以嵌入简单的示意图（如果技术允许）。  
  * 可以提供指向CircuitJS特定功能或帮助文档的链接。  
  * 学生可以上传电路截图以辅助问题描述（高级功能）。

### **7\. 未来展望**

* 支持更复杂的数字电路实验。  
* 集成图像识别能力，直接分析学生在CircuitJS中的电路截图。  
* 根据学生的历史表现和学习曲线，提供更深层次的个性化学习路径规划。  
* 允许学生在界面上直接勾选或填写实验步骤结果。

### **8\. 技术栈**

* **前后端：** Django \+ Tailwind CSS \+ HTML Temlates (HTMX / Alpine.js)， 网页能够显示CircuitJS的虚拟电路仿真，使用iframe从https://www.falstad.com/circuit/circuitjs.html嵌入 。  
* **AI模型：** 核心采用QWen3大语言模型（具备流式输出能力以提升交互即时性），可结合Qwen视觉模型进行多模态交互的扩展。模型接口应设计为可配置，允许后续根据需求切换或升级。  
* **数据库：** sqlite。  
* **虚拟实验环境：** CircuitJS (需考虑其是否提供API以供读取实时仿真数据)。

### **9\. 用户交互流程**

本节详细描述学生与AI Agent进行半加器仿真实验时的典型交互流程。

#### **9.1 实验开始与准备**

1. **学生：** 打开包含AI Agent的网页。  
2. **AI Agent:**  
   * **\[问候与介绍\]** "你好！欢迎来到半加器数字电路仿真实验..." (聊天窗口)  
   * **界面同步：** 右侧“实验助手面板”显示所有实验步骤，高亮“实验准备”；显示半加器原理图和理论真值表。  
3. **AI Agent:** "...请确保你已经熟悉中间的CircuitJS操作区域。准备好了吗？"  
4. **学生：** "准备好了。"  
5. **AI Agent:** "很好。我们先来回顾一下半加器的基础。请看右侧面板的原理图和真值表。半加器有两个输入A和B，两个输出S和C\_out..."  
   * **\[推理应用\]** Agent根据学生的回答调整后续解释的详细程度。

#### **9.2 电路搭建过程**

1. **AI Agent:** "现在我们开始搭建电路。请看实验步骤，当前是‘添加输入元件’。我们需要两个逻辑输入开关..." (聊天窗口)  
   * **界面同步：** “实验助手面板”高亮当前步骤“添加输入元件”。  
2. **学生：** (在CircuitJS中操作)  
3. **AI Agent:** (若学生操作停滞或有特定行为) “我注意到你正在寻找元件，逻辑输入开关通常在CircuitJS的‘输入和电源’菜单下。需要更详细的指引吗？” (主动建议)  
4. **AI Agent:** (指导完成添加输入后) "很好！输入A和B添加完毕。请在右侧‘本步实验结果记录’处确认或记录：‘两个逻辑输入已放置’。"  
5. **AI Agent:** "下一步是‘添加逻辑门’。我们需要一个异或门和一个与门..." (聊天窗口)  
   * **界面同步：** “实验助手面板”高亮当前步骤“添加逻辑门”。  
6. **AI Agent:** (指导完成连接后) "所有连接都完成了！请对照右侧的原理图再次检查一遍。确认无误后，请在‘本步实验结果记录’处记录：‘半加器电路连接完毕’。"

#### **9.3 仿真与验证**

1. **AI Agent:** "电路搭建完成！现在进入‘仿真与验证’步骤。请看右侧‘实时真值表’区域。我们将通过改变输入A和B的值来验证电路功能。" (聊天窗口)  
   * **界面同步：** “实验助手面板”高亮当前步骤“仿真与验证”。“实时真值表”准备接收数据。  
2. **AI Agent:** "请先将输入A设为0，输入B设为0。观察‘实时真值表’中S和C\_out的值，并在‘本步实验结果记录’中记下：A=0, B=0, S=?, C\_out=?"  
3. **学生：** (操作CircuitJS，设置A=0, B=0)  
   * **界面同步：** “实时真值表”区域根据CircuitJS的仿真结果（理想情况通过API读取）更新S和C\_out的值，例如显示 A=0, B=0, S=0, C\_out=0。  
4. **学生：** "记录好了，S是0，C\_out是0。"  
5. **AI Agent:** "正确！这与理论一致。现在请设置A=0, B=1..." (继续引导完成所有真值表组合的验证和记录)  
6. **学生：** (在某个测试中) "当A=1, B=1时，实时真值表显示S=0，但C\_out也是0，这和理论真值表不一样。"  
7. **AI Agent:**  
   * **\[推理与故障诊断\]** "是的，实时真值表的结果与理论不符。这通常意味着电路连接可能有问题。请对照右侧的原理图，重点检查一下与门的输入是否都正确连接到了A和B，以及与门的输出是否连接到了代表C\_out的输出探针上？"  
   * **(主动建议)** "你可以尝试先删除与门相关的连接，然后根据原理图重新连接一次。"

#### **9.4 总结与拓展**

1. **AI Agent:** "恭喜你，所有真值表项都验证通过，并且记录完毕！你成功完成了半加器的仿真实验！"  
   * **界面同步：** “实验助手面板”高亮当前步骤“实验总结”。  
2. **AI Agent:** (进行知识点总结和拓展提问)  
3. **AI Agent:** "今天的实验就到这里了。希望你有所收获！"

#### **9.5 异常与中断处理**

* (与前版本类似，但AI的建议可以结合当前界面信息，如“如果你不确定当前步骤，可以查看右侧‘实验步骤’面板。”)

### **10\. 系统架构图**

本系统主要由以下几个模块组成：

* **用户界面 (Frontend):**  
  * 技术栈：Django HTML Templates, Tailwind CSS, HTMX / Alpine.js。  
  * 功能：  
    * 呈现AI Agent的聊天界面。  
    * 嵌入并显示CircuitJS虚拟电路仿真环境。  
    * **新增：** 显示实验助手面板，包含：完整的实验步骤列表（高亮当前步骤）、电路原理图参考、从CircuitJS（或通过后端）获取的实时真值表/仿真数据、当前步骤的实验结果记录提示区。  
    * 处理用户输入（文本、可能的按钮点击）。  
    * 显示AI Agent的响应和指导。  
* **后端应用服务器 (Backend \- Django):**  
  * 技术栈：Django。  
  * 功能：  
    * 处理来自前端的用户请求。  
    * 管理用户会话和状态。  
    * 与AI模型服务进行交互，传递用户输入并获取模型输出。  
    * **新增：** 管理和提供实验步骤内容及原理图信息。  
    * **新增：** （若前端无法直接调用CircuitJS API或需要数据处理）可能需要代理对CircuitJS API的调用以获取实时数据，或处理由学生确认的仿真数据。  
    * （可选）记录用户交互数据到数据库。  
    * 提供API接口供前端调用。  
* **AI模型服务 (AI Model Service):**  
  * (与前版本类似，但其知识库需包含对实验步骤、原理图、真值表、结果记录的理解，以便更好地引导和提供主动建议)  
* **数据库 (Database):**  
  * (与前版本类似，可增加存储实验模板、步骤、原理图等静态资源)  
* **虚拟实验环境 (Virtual Lab Environment):**  
  * 工具：CircuitJS (作为外部嵌入式组件)。  
  * 功能：提供电路仿真功能。**关键：** 理想情况下，应提供JavaScript API供父页面（前端应用）读取仿真状态（如节点电压、逻辑门输出）以实现真值表的实时显示。若无直接API，则AI引导学生观察仿真结果并手动确认，由前端更新“实时真值表”区域的显示。

graph TD  
    A\[用户 (学生)\] \--\> B{用户界面 (浏览器)};  
    B \-- HTTP/WebSocket \--\> C\[后端应用服务器 (Django)\];  
    C \-- API请求 \--\> D\[AI模型服务 (QWen3)\];  
    D \-- 流式响应 \--\> C;  
    C \-- 数据读写/实验资源 \--\> E\[数据库 (SQLite)\];  
    B \-- iframe嵌入/JS API交互 \--\> F\[CircuitJS 虚拟实验环境\];  
    C \-- 实验步骤/原理图/真值表逻辑 \--\> B;  
    F \-- 实时仿真数据 (若API可用) \--\> B;

    subgraph "客户端"  
        B  
        F  
    end

    subgraph "服务器端"  
        C  
        D  
        E  
    end

    style A fill:\#f9f,stroke:\#333,stroke-width:2px  
    style B fill:\#bbf,stroke:\#333,stroke-width:2px  
    style C fill:\#lightgreen,stroke:\#333,stroke-width:2px  
    style D fill:\#orange,stroke:\#333,stroke-width:2px  
    style E fill:\#yellow,stroke:\#333,stroke-width:2px  
    style F fill:\#add,stroke:\#333,stroke-width:2px

**交互流程概述:**

1. 用户在前端界面与AI Agent交互，并操作嵌入的CircuitJS。实验助手面板显示步骤、原理图等信息。  
2. 前端将用户的文本输入发送到Django后端。  
3. Django后端可能从数据库获取实验步骤、原理图信息，结合用户输入，转发给AI模型服务。  
4. AI模型服务处理请求，生成指导信息和主动建议，返回给Django后端。  
5. Django后端将信息推送给前端界面展示给用户。  
6. 前端通过JS与CircuitJS iframe交互（若API可用）获取实时仿真数据并更新“实时真值表”，或由AI引导学生观察后手动确认数据。  
7. 数据库存储会话、日志及实验相关静态资源。

### **11\. UX架构图 (用户体验架构图)**

(本节Mermaid图与上一版本基本保持一致，因为其抽象层次较高，核心用户旅程和AI交互支撑逻辑不变，具体界面元素的增加体现在UX原型设计中。)

* **核心用户旅程 (Core User Journey):** (与前版本一致)  
* **信息架构 (Information Architecture \- AI Agent侧):** (与前版本一致，但知识模块需增强对新界面元素的理解和关联)  
* **关键用户界面元素 (Key UI Elements):**  
  * **AI Agent聊天窗口:** (与前版本一致)  
  * **CircuitJS嵌入区域:** (与前版本一致)  
  * **新增：实验助手面板:** 包含实验步骤列表（当前步骤高亮）、原理图参考区、实时真值表显示区、当前步骤结果记录提示区。

graph LR  
    subgraph "用户体验流程"  
    direction LR  
        A\[开始实验\] \--\> B(实验准备);  
        B \--\> C{电路搭建};  
        C \-- 遇到问题 \--\> D\[提问/求助\];  
        D \--\> C;  
        C \-- 完成 \--\> E{仿真与验证};  
        E \-- 结果不符 \--\> F\[故障排查\];  
        F \--\> E;  
        E \-- 完成 \--\> G\[总结与拓展\];  
        G \--\> H\[实验结束\];  
    end

    subgraph "AI Agent 交互支撑"  
    direction TB  
        U\[用户输入\] \--\> NLU\[自然语言理解\];  
        NLU \--\> DM\[对话管理/状态跟踪\];  
        DM \--\> KM\[知识库查询 (含实验步骤/原理图/真值表逻辑)\];  
        KM \--\> DM;  
        DM \--\> PL\[规划/推理 (含主动建议逻辑)\];  
        PL \--\> DM;  
        DM \--\> NLG\[自然语言生成\];  
        NLG \--\> RESP\[Agent响应\];  
    end

    RESP \--\> B;  
    RESP \--\> C;  
    RESP \--\> D;  
    RESP \--\> E;  
    RESP \--\> F;  
    RESP \--\> G;  
    RESP \--\> H;

    style A fill:\#f9f,stroke:\#333,stroke-width:2px  
    style B fill:\#bbf,stroke:\#333,stroke-width:2px  
    style C fill:\#ccf,stroke:\#333,stroke-width:2px  
    style D fill:\#ff9,stroke:\#333,stroke-width:2px  
    style E fill:\#cfc,stroke:\#333,stroke-width:2px  
    style F fill:\#fcc,stroke:\#333,stroke-width:2px  
    style G fill:\#9ff,stroke:\#333,stroke-width:2px  
    style H fill:\#ddd,stroke:\#333,stroke-width:2px

    style U fill:\#lightgrey,stroke:\#333,stroke-width:1px  
    style NLU fill:\#lightblue,stroke:\#333,stroke-width:1px  
    style DM fill:\#lightgreen,stroke:\#333,stroke-width:1px  
    style KM fill:\#lightyellow,stroke:\#333,stroke-width:1px  
    style PL fill:\#orange,stroke:\#333,stroke-width:1px  
    style NLG fill:\#pink,stroke:\#333,stroke-width:1px  
    style RESP fill:\#lavender,stroke:\#333,stroke-width:1px

**关键考虑点:** (与前版本一致，但更强调与新界面元素的协同)

### **12\. UX原型设计图 (低保真线框图)**

本节通过低保真线框图的形式，展示核心交互界面的布局和关键元素。

#### **12.1 主界面布局 (三栏式)**

\+------------------------------------------------------------------------------------------+  
| 网页标题：AI Agent \- 半加器仿真实验                                                      |  
\+------------------------------------------------------------------------------------------+  
|                                                                                          |  
| \+--------------------------+ \+------------------------------+ \+-------------------------+  |  
| |   AI Agent 聊天窗口      | |    CircuitJS 嵌入区域        | |  实验助手面板           |  |  
| |                          | |                              | |                         |  |  
| | \+----------------------+ | |  \[CircuitJS 仿真界面在此\]    | | \+---------------------+ |  |  
| | | \[Agent头像\]\[Agent消息1\]| |  |                              | | | \*\*实验步骤:\*\* | |  |  
| | | \[学生头像\]\[学生消息1\]  | |  |                              | | | 1\. 准备工作         | |  |  
| | | \[Agent头像\]\[Agent消息2\]| |  |                              | | | \*\*\> 2\. 添加输入(当前)\*\*| |  |  
| | |        ...           | |  |                              | | | 3\. 添加逻辑门       | |  |  
| | \+----------------------+ |  |                              | | | ...                 | |  |  
| |                          | |                              | | \+---------------------+ |  |  
| | \+----------------------+ |  |                              | | | \*\*原理图参考:\*\* | |  |  
| | | \[文本输入框：输入你的问题\]| |  |                              | | | \[显示半加器原理图\]  | |  |  
| | \+----------------------+ |  |                              | | \+---------------------+ |  |  
| | | \[发送按钮\] \[快捷帮助\]  | |  |                              | | | \*\*实时真值表:\*\* | |  |  
| | \+--------------------------+ |                              | | | A | B || S | C\_out  | |  |  
| |                          | |                              | | | 0 | 1 || 1 | 0      | |  |  
| |                          | |                              | | | (根据仿真实时更新)  | |  |  
| |                          | |                              | | \+---------------------+ |  |  
| |                          | |                              | | | \*\*本步实验结果记录:\*\* | |  |  
| |                          | |                              | | | AI提示: 请记录已添加 | |  |  
| |                          | |                              | | | 两个逻辑输入开关。   | |  |  
| \+--------------------------+ \+------------------------------+ \+-------------------------+  |  
|                                                                                          |  
\+------------------------------------------------------------------------------------------+

**界面元素说明:**

* **AI Agent 聊天窗口 (左侧):**  
  * **消息显示区:** (同前版本)  
  * **文本输入框:** (同前版本)  
  * **发送按钮:** (同前版本)  
  * **快捷帮助按钮 (可选):** (同前版本)  
* **CircuitJS 嵌入区域 (中间):**  
  * 通过 \<iframe\> 或类似方式嵌入完整的CircuitJS在线仿真器。学生直接在此区域操作。  
* **实验助手面板 (右侧):**  
  * **实验步骤:** 列表显示所有实验步骤，当前正在进行的步骤会被高亮或有特殊标记（如示例中的"\>"和加粗）。  
  * **原理图参考:** 显示当前实验（例如半加器）的静态标准电路原理图。  
  * **实时真值表:**  
    * 表格形式显示输入 (A, B) 和输出 (S, C\_out)。  
    * 此区域的数据应根据CircuitJS中的实时仿真状态更新（通过API或AI引导学生观察后更新）。  
  * **本步实验结果记录:**  
    * 一个文本区域或提示区。  
    * AI Agent会根据当前实验步骤，提示学生需要观察和记录哪些关键结果或操作确认。例如：“请记录：异或门已正确连接输入A和B，其输出连接到S。” 学生在自己的实验报告中记录，或未来可扩展为在此区域直接输入。

#### **12.2 交互示例：指导添加元器件 (结合实验助手面板)**

**场景:** AI Agent 指导学生添加一个异或门。

**AI Agent 聊天窗口显示:**

\+---------------------------+  
| \[Agent头像\] 很好，输入开关  |  
| 添加完毕。现在请看右侧实验  |  
| 步骤，我们进入“添加逻辑门”。|  
| 我们需要一个异或门。请在中间|  
| CircuitJS的菜单中找到并拖动 |  
| 一个异或门到工作区。        |  
| (原理图面板会显示XOR门位置) |  
\+---------------------------+

**实验助手面板显示:**

\+---------------------+  
| \*\*实验步骤:\*\* |  
| 1\. 准备工作         |  
| 2\. 添加输入元件     |  
| \*\*\> 3\. 添加逻辑门(当前)\*\*|  
| ...                 |  
\+---------------------+  
| \*\*原理图参考:\*\* |  
| \[半加器原理图，XOR高亮\]|  
\+---------------------+  
| \*\*实时真值表:\*\* |  
| (此时可能无有效读数)  |  
\+---------------------+  
| \*\*本步实验结果记录:\*\* |  
| AI提示: 添加异或门和  |  
| 与门到工作区。        |  
\+---------------------+

#### **12.3 交互示例：故障排查 (结合实时真值表)**

**场景:** 学生的仿真结果与真值表不符。

**AI Agent 聊天窗口显示:**

\+---------------------------+  
| \[学生头像\] 我设置了A=1,B=1，|  
| 但右边实时真值表显示C\_out是0|  
\+---------------------------+  
| \[Agent头像\] 我也看到了。实时|  
| 真值表显示C\_out为0，这与  |  
| 理论不符。请对照右侧的原理图|  
| 仔细检查与门的连接，特别是它|  
| 的两个输入和到C\_out的输出。 |  
| 需要我给出更详细的检查点吗？|  
\+---------------------------+

**实验助手面板显示:**

\+---------------------+  
| \*\*实验步骤:\*\* |  
| ...                 |  
| \*\*\> 4\. 仿真与验证(当前)\*\*|  
\+---------------------+  
| \*\*原理图参考:\*\* |  
| \[半加器原理图，与门连接高亮\]|  
\+---------------------+  
| \*\*实时真值表:\*\* |  
| A | B || S | C\_out  |  
| 1 | 1 || 0 | 0 (错误)|  
\+---------------------+  
| \*\*本步实验结果记录:\*\* |  
| AI提示: 验证A=1,B=1, |  
| 记录S和C\_out。若有误 |  
| 请排查并修正。        |  
\+---------------------+

**原型设计关键点:**

* **三栏分工明确:** 聊天、操作、辅助信息各司其职。  
* **上下文感知:** AI的指导与实验助手面板的内容（当前步骤、原理图）紧密关联。  
* **数据驱动验证:** 实时真值表为学生提供即时反馈，也为AI的故障诊断提供依据。  
* **结构化记录提示:** 引导学生关注每一步的关键产出。